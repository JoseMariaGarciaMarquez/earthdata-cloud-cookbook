{
  "hash": "bdd96215fd13b00d361563152dccf7b5",
  "result": {
    "markdown": "---\ntitle: Authentication\nexecute: \n  eval: false\n---\n\n\n## Earthdata Login\n\nAn Earthdata Login account is required to access data, as well as discover restricted data, from the NASA Earthdata system. Thus, to access NASA data, you need Earthdata Login. Please visit <https://urs.earthdata.nasa.gov> to register and manage your Earthdata Login account. This account is free to create and only takes a moment to set up.\n\nYou will need a netrc file containing your NASA Earthdata Login credentials in order to execute the notebooks. A netrc file can be created manually within text editor and saved to your home directory. The following code creates a hidden `.netrc` file (`_netrc` for Windows OS) with Earthdata login credentials in your home directory. This file is needed to access NASA Earthdata assets from scripting environments like Python and R.\n\n\n::: {.panel-tabset group=\"language\"}\n## Python\nWe recommend authentication with a few lines of code using `earthdata` Python package. Please check the [tutorial](#examples/earthdata-access-demo.html) on how to utilize `earthdata` package. \n\nAuthentication is also possible without the `earthdata` package; please review [this 2021 Cloud Hackathon tutorial](https://nasa-openscapes.github.io/2021-Cloud-Workshop-AGU/tutorials/02_NASA_Earthdata_Authentication.html) for more details.  \n\n## R\nFor authentication in R, please run the code below:\n\n::: {.cell filename='[R code]'}\n\n```{.r .cell-code}\n# Required packages for this script\npackages = c('sys', 'getPass')\n\n# Identify missing (not installed) packages\nnew.packages = packages[!(packages %in% installed.packages()[,\"Package\"])]\n\n# Install missing packages\nif(length(new.packages)) install.packages(new.packages, repos='http://cran.rstudio.com/')\n\n# Load packages into R\nlibrary(sys)\nlibrary(getPass)\n\n# Determine OS and associated netrc file \nnetrc_type <- if(.Platform$OS.type == \"windows\") \"_netrc\" else \".netrc\"    # Windows OS uses _netrc file\n\n# Specify path to user profile \nup <- file.path(Sys.getenv(\"USERPROFILE\"))                            # Retrieve user directory (for netrc file)\n\n# Below, HOME and Userprofile directories are set.  \n\nif (up == \"\") {\n    up <- Sys.getenv(\"HOME\") \n    Sys.setenv(\"userprofile\" = up)\n    if (up == \"\") {\n        cat('USERPROFILE/HOME directories need to be set up. Please type sys.setenv(\"HOME\" = \"YOURDIRECTORY\") or  sys.setenv(\"USERPROFILE\" = \"YOURDIRECTORY\") in your console and type your USERPROFILE/HOME direcory instead of \"YOURDIRECTORY\". Next, run the code chunk again.')\n    }\n} else {Sys.setenv(\"HOME\" = up)}        \n\nnetrc_path <- file.path(up, netrc_type, fsep = .Platform$file.sep)    # Path to netrc file\n\n# Create a netrc file if one does not exist already\nif (file.exists(netrc_path) == FALSE || grepl(\"urs.earthdata.nasa.gov\", readLines(netrc_path)) == FALSE) {\n    netrc_conn <- file(netrc_path)\n    \n    # User will be prompted for NASA Earthdata Login Username and Password below\n    writeLines(c(\"machine urs.earthdata.nasa.gov\",\n                 sprintf(\"login %s\", getPass(msg = \"Enter NASA Earthdata Login Username \\n (An account can be Created at urs.earthdata.nasa.gov):\")),\n                 sprintf(\"password %s\", getPass(msg = \"Enter NASA Earthdata Login Password:\"))), netrc_conn)\n    close(netrc_conn)\n}else{\n    i <- 0 \n    for (f in readLines(netrc_path)){\n        i <- i + 1\n        if (f ==\"machine urs.earthdata.nasa.gov\"){\n            username <- strsplit(readLines(netrc_path)[i+1], \" \")[[1]][2]\n            un <- getPass(msg = paste0(\"Is your NASA Earthdata Login Username: \", username, \"\\n\\n Type yes or no.\"))\n            if (tolower(un) == 'yes'){\n                tx <- gsub(readLines(netrc_path)[i+2], sprintf(\"password %s\", getPass(msg = \"Enter NASA Earthdata Login Password:\")), readLines(netrc_path))\n                writeLines(tx, netrc_path)\n                rm(username, un, tx, f, i)\n            }else{\n                user <- gsub(readLines(netrc_path)[i+1], sprintf(\"login %s\", getPass(msg = \"Enter NASA Earthdata Login Username:\")), readLines(netrc_path))\n                tx <- gsub(readLines(netrc_path)[i+2], sprintf(\"password %s\", getPass(msg = \"Enter NASA Earthdata Login Password:\")), readLines(netrc_path))\n                writeLines(tx, netrc_path)\n                rm(username, un, user, tx, f, i)\n            \n            }\n            break\n        }\n    }\n}\n```\n:::\n\n\n:::\n\n## AWS Credentials\n\n*coming soon*\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}