{
  "hash": "57637b605f065f312ee45b7ca76b4a69",
  "result": {
    "markdown": "---\ntitle: \"Getting Started with NASA's CMR-STAC API in R\"\n---\n\n\n\n\n------------------------------------------------------------------------\n\n**This tutorial demonstrates how to interact with CMR-STAC in R.**\n\nThis tutorial will teach you how to navigate and explore NASA's Common Metadata \nRepository (CMR) SpatioTemporal Asset Catalog (STAC) to learn about the datasets \navailable through LP DAAC Cumulus cloud archive.\n\n------------------------------------------------------------------------\n\n### Topics Covered in this Tutorial\n\n1.  **Introduction to STAC and the CMR-STAC API**  \n  1a. What is STAC?  \n  1b. What is the CMR-STAC API?  \n2.  **Get started with CMR-STAC**  \n  2a. CMR-STAC API  \n  2b. STAC Catalog  \n  2c. STAC Collection  \n  2d. STAC Item  \n  2e. Assets  \n3.  **CMR-STAC Search**  \n  3a. Define Search Parameters  \n  3b. Search for Items\n\n------------------------------------------------------------------------\n\n### Prerequisites:\n\n-  R and RStudio are required to execute this tutorial. Installation details can\n   be found [here](https://www.rstudio.com/products/rstudio/download/#download).   \n\n-  This tutorial has been tested on Windows using R Version 4.1.0 and RStudio \n   version 1.4.1717. \n\n------------------------------------------------------------------------\n\n### Procedures:\n\n#### Getting Started:\n\n  - [Clone](ssh://git@git.earthdata.nasa.gov:7999/lpdur/hls_tutorial_r.git) or [download](https://git.earthdata.nasa.gov/rest/api/latest/projects/LPDUR/repos/hls_tutorial_r/archive?format=zip) \nHLS_Tutorial_R Repository from the LP DAAC Data User Resources Repository.\n\n  - When you open this Rmarkdown notebook in RStudio, you can click the little green \"Play\" button in each grey code chunk to execute the code. The result can be printed either in the R Console or inline in the RMarkdown notebook, depending on your RStudio preferences. \n\n#### Environment Setup:\n\n#### 1. Check the version of R by typing `version` into the console and RStudio by typing `RStudio.Version()` into the console and update them if needed.\n\n-   Windows\n\n    -   Install and load installr:\n\n        -   `install.packages(\"installr\");library(installr)`\n\n    -   Copy/Update the existing packages to the new R installation:\n\n        -   `updateR()`\n\n    -   Open RStudio, go to Help \\> Check for Updates to install newer version of RStudio (if available).\n\n-   Mac\n\n    -   Go to <https://cloud.r-project.org/bin/macosx/>.\n    -   Download the latest release (R-4.0.1.pkg) and finish the installation.\n    -   Open RStudio, go to Help \\> Check for Updates to install newer version of RStudio (if available).\n    -   To update packages, go to Tools \\> Check for Package Updates. If updates are available, select All, and click Install Updates.\n\n#### 2. Required packages\n\n-   **Required packages:**\n\n    -   `httr`\n    -   `jsonlite`\n    -   `purrr`\n    -   `DT`\n    -   `dplyr`\n    -   `magrittr`\n    -   `xml2`\n\nRun the cell below to identify any missing packages to install, and then load \nall of the required packages.\n\n\n::: {.cell}\n\n```{.r .cell-code}\npackages <- c('httr','purrr','jsonlite','DT','magrittr', 'xml2', 'dplyr')\nnew.packages <- packages[!(packages %in% installed.packages()[,\"Package\"])]\nif(length(new.packages)) install.packages(new.packages, repos='http://cran.rstudio.com/') else print('All required packages are installed.')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"All required packages are installed.\"\n```\n:::\n\n```{.r .cell-code}\ninvisible(lapply(packages, library, character.only = TRUE))\n```\n:::\n\n\n------------------------------------------------------------------------\n\n# 1. Introduction to STAC and the CMR-STAC API\n\n## 1a. What is STAC?\n\nSTAC is short for [Spatiotemporal Asset Catalog](http://stacspec.org/), a series\nof specifications that provide a common language for interpreting geospatial \ninformation in order to standardize indexing and discovery of `spatiotemporal assets` \n(files containing information about the Earth across space and time).\n\nThere are four specifications that work both independently and together:\n\n1)  [STAC Catalog](https://github.com/radiantearth/stac-spec/blob/master/catalog-spec/catalog-spec.md)\n2)  [STAC Collection](https://github.com/radiantearth/stac-spec/blob/master/collection-spec/collection-spec.md)\n3)  [STAC Item](https://github.com/radiantearth/stac-spec/blob/master/item-spec/item-spec.md)  \n4)  [STAC API](https://github.com/radiantearth/stac-api-spec) specification \nbuilds on top of the three core specifications mentioned above. All these \nspecifications are intended to be used together, yet are designed in a way that\neach piece is small, self-contained, and reusable in other contexts.\n\n------------------------------------------------------------------------\n\n## 1b. What is the CMR-STAC API?\n\nThe Common Metadata Repository (CMR) is a metadata system that catalogs Earth \nScience data and associated metadata records. NASA's CMR-STAC Application \nProgramming Interface (API) is a translation API for STAC users who want to \naccess and search through CMR's vast metadata holdings using STAC keywords.\n\n------------------------------------------------------------------------\n\n# 2. Get started with CMR-STAC\n\n## 2a. CMR-STAC API\n\nThe CMR-STAC API contains endpoints that enable the querying of STAC items.\n\nAssign the CMR-STAC URL to a static variable.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nCMR_STAC_URL <- 'https://cmr.earthdata.nasa.gov/stac/'\n```\n:::\n\n\nConnect to the CMR-STAC landing page which contains all the available data \nproviders and their STAC endpoint. In this tutorial, the `httr` package is used \nto navigate CMR-STAC API.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncmr_cat <- httr::GET(CMR_STAC_URL) %>%          # Request and retrieve the info from CMR-STAC URL\n  httr::content()         \ncat('You are using',cmr_cat$title,'version',cmr_cat$stac_version,\".\", cmr_cat$description,sep=\" \")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nYou are using NASA CMR STAC Proxy version 1.0.0 . This is the landing page for CMR-STAC. Each provider link contains a STAC endpoint.\n```\n:::\n:::\n\n\nHere, `jsonlite` is used to change the format of the content returned from our \nrequest and the `DT` package is used to make the returned information more readable. \nThe providers' names and URL links are found in the `title` and 'href' fields respectively.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncmr_cat_links <- cmr_cat$links %>% \n  jsonlite::toJSON(auto_unbox = TRUE) %>% \n  jsonlite::fromJSON() %>% \n  as.data.frame()\nDT::datatable(cmr_cat_links)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"htmlwidget-01afa66ebbcefadf81d4\" style=\"width:100%;height:auto;\" class=\"datatables html-widget\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-01afa66ebbcefadf81d4\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"31\",\"32\",\"33\",\"34\",\"35\",\"36\",\"37\",\"38\",\"39\",\"40\",\"41\",\"42\",\"43\",\"44\",\"45\",\"46\",\"47\",\"48\",\"49\",\"50\",\"51\",\"52\",\"53\",\"54\",\"55\",\"56\",\"57\",\"58\"],[\"self\",\"root\",\"about\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\"],[\"https://cmr.earthdata.nasa.gov/stac/\",\"https://cmr.earthdata.nasa.gov/stac/\",\"https://wiki.earthdata.nasa.gov/display/ED/CMR+SpatioTemporal+Asset+Catalog+%28CMR-STAC%29+Documentation\",\"https://cmr.earthdata.nasa.gov/stac/LARC_ASDC\",\"https://cmr.earthdata.nasa.gov/stac/USGS_EROS\",\"https://cmr.earthdata.nasa.gov/stac/ESA\",\"https://cmr.earthdata.nasa.gov/stac/GHRC\",\"https://cmr.earthdata.nasa.gov/stac/LAADS\",\"https://cmr.earthdata.nasa.gov/stac/OBPG\",\"https://cmr.earthdata.nasa.gov/stac/OB_DAAC\",\"https://cmr.earthdata.nasa.gov/stac/ECHO\",\"https://cmr.earthdata.nasa.gov/stac/ISRO\",\"https://cmr.earthdata.nasa.gov/stac/LPCUMULUS\",\"https://cmr.earthdata.nasa.gov/stac/EDF_DEV04\",\"https://cmr.earthdata.nasa.gov/stac/GES_DISC\",\"https://cmr.earthdata.nasa.gov/stac/ASF\",\"https://cmr.earthdata.nasa.gov/stac/OMINRT\",\"https://cmr.earthdata.nasa.gov/stac/EUMETSAT\",\"https://cmr.earthdata.nasa.gov/stac/NCCS\",\"https://cmr.earthdata.nasa.gov/stac/NSIDCV0\",\"https://cmr.earthdata.nasa.gov/stac/PODAAC\",\"https://cmr.earthdata.nasa.gov/stac/LARC\",\"https://cmr.earthdata.nasa.gov/stac/USGS\",\"https://cmr.earthdata.nasa.gov/stac/SCIOPS\",\"https://cmr.earthdata.nasa.gov/stac/LANCEMODIS\",\"https://cmr.earthdata.nasa.gov/stac/CDDIS\",\"https://cmr.earthdata.nasa.gov/stac/JAXA\",\"https://cmr.earthdata.nasa.gov/stac/AU_AADC\",\"https://cmr.earthdata.nasa.gov/stac/ECHO10_OPS\",\"https://cmr.earthdata.nasa.gov/stac/LPDAAC_ECS\",\"https://cmr.earthdata.nasa.gov/stac/NSIDC_ECS\",\"https://cmr.earthdata.nasa.gov/stac/ORNL_DAAC\",\"https://cmr.earthdata.nasa.gov/stac/LM_FIRMS\",\"https://cmr.earthdata.nasa.gov/stac/SEDAC\",\"https://cmr.earthdata.nasa.gov/stac/LANCEAMSR2\",\"https://cmr.earthdata.nasa.gov/stac/NOAA_NCEI\",\"https://cmr.earthdata.nasa.gov/stac/USGS_LTA\",\"https://cmr.earthdata.nasa.gov/stac/GESDISCCLD\",\"https://cmr.earthdata.nasa.gov/stac/GHRSSTCWIC\",\"https://cmr.earthdata.nasa.gov/stac/LARC_CLOUD\",\"https://cmr.earthdata.nasa.gov/stac/ASIPS\",\"https://cmr.earthdata.nasa.gov/stac/ESDIS\",\"https://cmr.earthdata.nasa.gov/stac/POCLOUD\",\"https://cmr.earthdata.nasa.gov/stac/NSIDC_CPRD\",\"https://cmr.earthdata.nasa.gov/stac/ORNL_CLOUD\",\"https://cmr.earthdata.nasa.gov/stac/FEDEO\",\"https://cmr.earthdata.nasa.gov/stac/MLHUB\",\"https://cmr.earthdata.nasa.gov/stac/XYZ_PROV\",\"https://cmr.earthdata.nasa.gov/stac/GHRC_DAAC\",\"https://cmr.earthdata.nasa.gov/stac/CSDA\",\"https://cmr.earthdata.nasa.gov/stac/NRSCC\",\"https://cmr.earthdata.nasa.gov/stac/CEOS_EXTRA\",\"https://cmr.earthdata.nasa.gov/stac/AMD_KOPRI\",\"https://cmr.earthdata.nasa.gov/stac/AMD_USAPDC\",\"https://cmr.earthdata.nasa.gov/stac/MOPITT\",\"https://cmr.earthdata.nasa.gov/stac/GHRC_CLOUD\",\"https://cmr.earthdata.nasa.gov/stac/LPCLOUD\",\"https://cmr.earthdata.nasa.gov/stac/CCMEO\"],[\"NASA CMR-STAC Root Catalog\",\"NASA CMR-STAC Root Catalog\",\"CMR-STAC Documentation\",\"LARC_ASDC\",\"USGS_EROS\",\"ESA\",\"GHRC\",\"LAADS\",\"OBPG\",\"OB_DAAC\",\"ECHO\",\"ISRO\",\"LPCUMULUS\",\"EDF_DEV04\",\"GES_DISC\",\"ASF\",\"OMINRT\",\"EUMETSAT\",\"NCCS\",\"NSIDCV0\",\"PODAAC\",\"LARC\",\"USGS\",\"SCIOPS\",\"LANCEMODIS\",\"CDDIS\",\"JAXA\",\"AU_AADC\",\"ECHO10_OPS\",\"LPDAAC_ECS\",\"NSIDC_ECS\",\"ORNL_DAAC\",\"LM_FIRMS\",\"SEDAC\",\"LANCEAMSR2\",\"NOAA_NCEI\",\"USGS_LTA\",\"GESDISCCLD\",\"GHRSSTCWIC\",\"LARC_CLOUD\",\"ASIPS\",\"ESDIS\",\"POCLOUD\",\"NSIDC_CPRD\",\"ORNL_CLOUD\",\"FEDEO\",\"MLHUB\",\"XYZ_PROV\",\"GHRC_DAAC\",\"CSDA\",\"NRSCC\",\"CEOS_EXTRA\",\"AMD_KOPRI\",\"AMD_USAPDC\",\"MOPITT\",\"GHRC_CLOUD\",\"LPCLOUD\",\"CCMEO\"],[\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\"]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>rel<\\/th>\\n      <th>href<\\/th>\\n      <th>title<\\/th>\\n      <th>type<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"columnDefs\":[{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\nThe data frame above shows all the data providers with their associated STAC \ncatalog endpoints. You will notice above that the CMR-STAC API contains many \ndifferent endpoints--not just from NASA LP DAAC, but also contains endpoints \nfor other NASA ESDIS DAACs. Use the `title` field to identify the data provider \nyou are interested in. The data product used in this tutorial is hosted in the \nLP DAAC Cumulus Cloud space (LPCLOUD).\n\nAssign `LPCLOUD` to the `provider` variable and get this provider's endpoint \nfrom the CMR catalog using the URL in `Link` field.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nprovider <- 'LPCLOUD'\nlpcloud_cat_link <- cmr_cat_links[which(cmr_cat_links$title == provider), 'href']\nlpcloud_cat_link\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"https://cmr.earthdata.nasa.gov/stac/LPCLOUD\"\n```\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## 2b. STAC Catalog\n\nSTAC Catalog Contains a JSON file of links that organize all the available \ncollections. Below, connect to the LPCLOUD STAC Catalog endpoint using `httr` \npackage and print the information contained in the Catalog. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nlpcloud_cat <- httr::GET(lpcloud_cat_link) %>% \n  httr::content()\n\nlpcloud_cat <- lpcloud_cat %>% \n  jsonlite::toJSON(auto_unbox = TRUE) %>% \n  jsonlite::fromJSON() \n\nDT::datatable(lpcloud_cat$links)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"htmlwidget-3301343173de64d99edb\" style=\"width:100%;height:auto;\" class=\"datatables html-widget\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-3301343173de64d99edb\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\"],[\"self\",\"root\",\"collections\",\"search\",\"search\",\"conformance\",\"service-desc\",\"service-doc\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"child\",\"next\"],[\"https://cmr.earthdata.nasa.gov/stac/LPCLOUD\",\"https://cmr.earthdata.nasa.gov/stac/\",\"https://cmr.earthdata.nasa.gov/stac/LPCLOUD/collections\",\"https://cmr.earthdata.nasa.gov/stac/LPCLOUD/search\",\"https://cmr.earthdata.nasa.gov/stac/LPCLOUD/search\",\"https://cmr.earthdata.nasa.gov/stac/LPCLOUD/conformance\",\"https://api.stacspec.org/v1.0.0-beta.1/openapi.yaml\",\"https://api.stacspec.org/v1.0.0-beta.1/index.html\",\"https://cmr.earthdata.nasa.gov/stac/LPCLOUD/collections/ASTGTM.v003\",\"https://cmr.earthdata.nasa.gov/stac/LPCLOUD/collections/ECO_L1B_ATT.v002\",\"https://cmr.earthdata.nasa.gov/stac/LPCLOUD/collections/ECO_L2_CLOUD.v002\",\"https://cmr.earthdata.nasa.gov/stac/LPCLOUD/collections/ECO_L1B_GEO.v002\",\"https://cmr.earthdata.nasa.gov/stac/LPCLOUD/collections/ECO_L2_LSTE.v002\",\"https://cmr.earthdata.nasa.gov/stac/LPCLOUD/collections/ECO_L1B_RAD.v002\",\"https://cmr.earthdata.nasa.gov/stac/LPCLOUD/collections/ECO_L2T_LSTE.v002\",\"https://cmr.earthdata.nasa.gov/stac/LPCLOUD/collections/EMITL1BRAD.v001\",\"https://cmr.earthdata.nasa.gov/stac/LPCLOUD/collections/EMITL2ARFL.v001\",\"https://cmr.earthdata.nasa.gov/stac/LPCLOUD/collections/HLSL30.v2.0\",\"https://cmr.earthdata.nasa.gov/stac/LPCLOUD?page=2\"],[\"Provider catalog\",\"Root catalog\",\"Provider Collections\",\"Provider Item Search\",\"Provider Item Search\",\"Conformance Classes\",\"OpenAPI Doc\",\"HTML documentation\",null,null,null,null,null,null,null,null,null,null,null],[\"application/json\",\"application/json\",\"application/json\",\"application/geo+json\",\"application/geo+json\",\"application/geo+json\",\"application/vnd.oai.openapi;version=3.0\",\"text/html\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"application/json\",null],[null,null,null,\"GET\",\"POST\",null,null,null,null,null,null,null,null,null,null,null,null,null,null]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>rel<\\/th>\\n      <th>href<\\/th>\\n      <th>title<\\/th>\\n      <th>type<\\/th>\\n      <th>method<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"columnDefs\":[{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\nLPCLOUD STAC catalog includes URL links to the root, collections, search, and \nchild STAC Catalogs. The data frame above also shows the available collections \nin the LPCLOUD catalog.\n\n------------------------------------------------------------------------\n\n## 2c. STAC Collection\n\nSTAC Collection is extension of STAC Catalog containing additional information \nthat describe the STAC Items in that Collection.\n\nGet the URL link to the STAC Collections. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nlpcloud_col_link <- lpcloud_cat$links[which(lpcloud_cat$links$rel == 'collections'),'href']\nlpcloud_col_link\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"https://cmr.earthdata.nasa.gov/stac/LPCLOUD/collections\"\n```\n:::\n:::\n\n\nNext, get the content describing the collections within LPCLOUD Catalog. \nImportant information such as data collection ID, title, description, and \nlinks to collection endpoints are provided here. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nlpcloud_collection <- httr::GET(lpcloud_col_link) %>% \n  httr::content() \n\nlpcloud_collection <- lpcloud_collection %>% \n  jsonlite::toJSON(auto_unbox = TRUE, pretty = TRUE)\n```\n:::\n\n\nPrint the collections within LPCLOUD STAC catalog. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nlpcloud_collection_df <- jsonlite::fromJSON(lpcloud_collection)$collections\nlpcloud_collection_df$id\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"ASTGTM.v003\"       \"ECO_L1B_ATT.v002\"  \"ECO_L2_CLOUD.v002\"\n [4] \"ECO_L1B_GEO.v002\"  \"ECO_L2_LSTE.v002\"  \"ECO_L1B_RAD.v002\" \n [7] \"ECO_L2T_LSTE.v002\" \"EMITL1BRAD.v001\"   \"EMITL2ARFL.v001\"  \n[10] \"HLSL30.v2.0\"      \n```\n:::\n:::\n\n\nIn CMR, Collection ID is used to query by a specific product, so be sure to \nsave the ID for a collection you are interested in. For instance, the Collection \nID for ASTER Global Digital Elevation Model V003 is `ASTGTM.v003`. Note that the \n\"id\" shortname is in the format: productshortname.vVVV (where VVV = product version).\n\nHere, get the URL link to the `ASTGTM.v003` STAC Collection. If you are \ninterested in querying a different LPCLOUD product, swap out the shortname to \nassign to the `collection` variable below.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncollection <- 'ASTGTM.v003'    # USER INPUT\ncol_links <- lpcloud_collection_df$links[which(lpcloud_collection_df$id == collection)] %>% \n  as.data.frame()\n\nastgtm_URL <- col_links[which(col_links$rel == 'self'), 'href']\nastgtm_URL\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"https://cmr.earthdata.nasa.gov/stac/LPCLOUD/collections/ASTGTM.v003\"\n```\n:::\n:::\n\n\nThe STAC Collection metadata for any collection contains metadata and information \nthat is applicable to every STAC Item and asset(s) that it contains. Get the content \nof the ASTGTM.v003 collection URL and print the collection description.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nastgtm_collection <- httr::GET(astgtm_URL) %>% \n  httr::content()\n\nastgtm_collection <- astgtm_collection %>% \n  jsonlite::toJSON(auto_unbox = TRUE) %>% \n  jsonlite::fromJSON()\n\ncat(astgtm_collection$description)\n```\n\n::: {.cell-output .cell-output-stdout}\n```{style=\"max-height: 200px;\"}\nThe ASTER Global Digital Elevation Model (GDEM) Version 3 (ASTGTM) provides a global digital elevation model (DEM) of land areas on Earth at a spatial resolution of 1 arc second (approximately 30 meter horizontal posting at the equator).\n\nThe development of the ASTER GDEM data products is a collaborative effort between National Aeronautics and Space Administration (NASA) and Japan’s Ministry of Economy, Trade, and Industry (METI). The ASTER GDEM data products are created by the Sensor Information Laboratory Corporation (SILC) in Tokyo. \n\nThe ASTER GDEM Version 3 data product was created from the automated processing of the entire ASTER Level 1A (https://doi.org/10.5067/ASTER/AST_L1A.003) archive of scenes acquired between March 1, 2000, and November 30, 2013. Stereo correlation was used to produce over one million individual scene based ASTER DEMs, to which cloud masking was applied. All cloud screened DEMs and non-cloud screened DEMs were stacked. Residual bad values and outliers were removed. In areas with limited data stacking, several existing reference DEMs were used to supplement ASTER data to correct for residual anomalies. Selected data were averaged to create final pixel values before partitioning the data into 1 degree latitude by 1 degree longitude tiles with a one pixel overlap. To correct elevation values of water body surfaces, the ASTER Global Water Bodies Database (ASTWBD) (https://doi.org/10.5067/ASTER/ASTWBD.001) Version 1 data product was also generated. \n\nThe geographic coverage of the ASTER GDEM extends from 83° North to 83° South. Each tile is distributed in GeoTIFF format and projected on the 1984 World Geodetic System (WGS84)/1996 Earth Gravitational Model (EGM96) geoid. Each of the 22,912 tiles in the collection contain at least 0.01% land area. \n\nProvided in the ASTER GDEM product are layers for DEM and number of scenes (NUM). The NUM layer indicates the number of scenes that were processed for each pixel and the source of the data.\n\nWhile the ASTER GDEM Version 3 data products offer substantial improvements over Version 2, users are advised that the products still may contain anomalies and artifacts that will reduce its usability for certain applications. \n\nImprovements/Changes from Previous Versions \n• Expansion of acquisition coverage to increase the amount of cloud-free input scenes from about 1.5 million in Version 2 to about 1.88 million scenes in Version 3.\n• Separation of rivers from lakes in the water body processing. \n• Minimum water body detection size decreased from 1 km2 to 0.2 km2. \n```\n:::\n:::\n\n\nWe can also get the spatial and temporal extent information. Below, we can see \nthis collection has a global spatial extent. ASTER GDEM is a single, static \ndataset that incorporates observation from March 2000 to November 2013.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nastgtm_collection$extent %>% \n  jsonlite::toJSON(auto_unbox = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n{\"spatial\":{\"bbox\":[[-180,-83,180,82]]},\"temporal\":{\"interval\":[[\"2000-03-01T00:00:00.000Z\",\"2013-11-30T23:59:59.999Z\"]]}} \n```\n:::\n:::\n\n\nSTAC collection also includes useful links. You can visit all the items within \nthis collection using the `Items` URL.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nDT::datatable(astgtm_collection$links)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"htmlwidget-a0df08d834f33a67e794\" style=\"width:100%;height:auto;\" class=\"datatables html-widget\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-a0df08d834f33a67e794\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\"],[\"self\",\"root\",\"parent\",\"items\",\"about\",\"via\",\"child\"],[\"https://cmr.earthdata.nasa.gov/stac/LPCLOUD/collections/ASTGTM.v003\",\"https://cmr.earthdata.nasa.gov/stac\",\"https://cmr.earthdata.nasa.gov/stac/LPCLOUD\",\"https://cmr.earthdata.nasa.gov/stac/LPCLOUD/collections/ASTGTM.v003/items\",\"https://cmr.earthdata.nasa.gov/search/concepts/C1711961296-LPCLOUD.html\",\"https://cmr.earthdata.nasa.gov/search/concepts/C1711961296-LPCLOUD.json\",\"https://cmr.earthdata.nasa.gov/stac/LPCLOUD/collections/ASTGTM.v003/2000\"],[\"Info about this collection\",\"Root catalog\",\"Parent catalog\",\"Granules in this collection\",\"HTML metadata for collection\",\"CMR JSON metadata for collection\",\"2000 catalog\"],[\"application/json\",\"application/json\",\"application/json\",\"application/json\",\"text/html\",\"application/json\",\"application/json\"]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>rel<\\/th>\\n      <th>href<\\/th>\\n      <th>title<\\/th>\\n      <th>type<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"columnDefs\":[{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\nGet the URL to the ASTGTM.v003 Items.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nitems_url <- astgtm_collection$links [which(astgtm_collection$links$rel == 'items'), 'href']\nitems_url\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"https://cmr.earthdata.nasa.gov/stac/LPCLOUD/collections/ASTGTM.v003/items\"\n```\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## 2d. STAC Item\n\nSTAC Item represents data and metadata assets that are spatiotemporally coincident. \nBelow, query the STAC Items within the `ASTGTM.v003` STAC Collection and print the \nfirst item in the collection.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nastgtm_items <- httr::GET(items_url) %>% \n  httr::content(as = \"text\") %>%  \n  jsonlite::fromJSON()\n\nF1 <- astgtm_items$features[1,] %>% \n  jsonlite::toJSON(auto_unbox = TRUE, pretty = TRUE)\nF1\n```\n\n::: {.cell-output .cell-output-stdout}\n```{style=\"max-height: 300px;\"}\n[\n  {\n    \"type\": \"Feature\",\n    \"id\": \"ASTGTMV003_N03E008\",\n    \"stac_version\": \"1.0.0\",\n    \"stac_extensions\": [],\n    \"collection\": \"ASTGTM.v003\",\n    \"geometry\": {\n      \"type\": \"Polygon\",\n      \"coordinates\": [\n        [\n          [7.9999, 2.9999],\n          [9.0001, 2.9999],\n          [9.0001, 4.0001],\n          [7.9999, 4.0001],\n          [7.9999, 2.9999]\n        ]\n      ]\n    },\n    \"bbox\": [7.9999, 2.9999, 9.0001, 4.0001],\n    \"links\": [\n      {\n        \"rel\": \"self\",\n        \"href\": \"https://cmr.earthdata.nasa.gov/stac/LPCLOUD/collections/ASTGTM.v003/items/ASTGTMV003_N03E008\"\n      },\n      {\n        \"rel\": \"parent\",\n        \"href\": \"https://cmr.earthdata.nasa.gov/stac/LPCLOUD/collections/ASTGTM.v003\"\n      },\n      {\n        \"rel\": \"collection\",\n        \"href\": \"https://cmr.earthdata.nasa.gov/stac/LPCLOUD/collections/ASTGTM.v003\"\n      },\n      {\n        \"rel\": \"root\",\n        \"href\": \"https://cmr.earthdata.nasa.gov/stac/\"\n      },\n      {\n        \"rel\": \"provider\",\n        \"href\": \"https://cmr.earthdata.nasa.gov/stac/LPCLOUD\"\n      },\n      {\n        \"rel\": \"via\",\n        \"href\": \"https://cmr.earthdata.nasa.gov/search/concepts/G1716133754-LPCLOUD.json\"\n      },\n      {\n        \"rel\": \"via\",\n        \"href\": \"https://cmr.earthdata.nasa.gov/search/concepts/G1716133754-LPCLOUD.umm_json\"\n      }\n    ],\n    \"properties\": {\n      \"datetime\": \"2000-03-01T00:00:00.000Z\",\n      \"start_datetime\": \"2000-03-01T00:00:00.000Z\",\n      \"end_datetime\": \"2013-11-30T23:59:59.000Z\"\n    },\n    \"assets\": {\n      \"003/ASTGTMV003_N03E008_dem\": {\n        \"href\": \"https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ASTGTM.003/ASTGTMV003_N03E008_dem.tif\",\n        \"title\": \"Download ASTGTMV003_N03E008_dem.tif\"\n      },\n      \"003/ASTGTMV003_N03E008_num\": {\n        \"href\": \"https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ASTGTM.003/ASTGTMV003_N03E008_num.tif\",\n        \"title\": \"Download ASTGTMV003_N03E008_num.tif\"\n      },\n      \"browse\": {\n        \"href\": \"https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ASTGTM.003/ASTGTMV003_N03E008.1.jpg\",\n        \"type\": \"image/jpeg\",\n        \"title\": \"Download ASTGTMV003_N03E008.1.jpg\"\n      },\n      \"metadata\": {\n        \"href\": \"https://cmr.earthdata.nasa.gov/search/concepts/G1716133754-LPCLOUD.xml\",\n        \"type\": \"application/xml\"\n      },\n      \"003/ASTGTMV003_N02E022_dem\": {},\n      \"003/ASTGTMV003_N02E022_num\": {},\n      \"003/ASTGTMV003_N00W065_dem\": {},\n      \"003/ASTGTMV003_N00W065_num\": {},\n      \"003/ASTGTMV003_N01E009_dem\": {},\n      \"003/ASTGTMV003_N01E009_num\": {},\n      \"003/ASTGTMV003_N02E009_dem\": {},\n      \"003/ASTGTMV003_N02E009_num\": {},\n      \"003/ASTGTMV003_N03E021_dem\": {},\n      \"003/ASTGTMV003_N03E021_num\": {},\n      \"003/ASTGTMV003_N01E021_dem\": {},\n      \"003/ASTGTMV003_N01E021_num\": {},\n      \"003/ASTGTMV003_N01E042_dem\": {},\n      \"003/ASTGTMV003_N01E042_num\": {},\n      \"003/ASTGTMV003_N01W069_dem\": {},\n      \"003/ASTGTMV003_N01W069_num\": {},\n      \"003/ASTGTMV003_N01W080_dem\": {},\n      \"003/ASTGTMV003_N01W080_num\": {}\n    }\n  }\n] \n```\n:::\n:::\n\n\nNotice that the number of items matching our request is far more than what is returned.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncat(astgtm_items$context$matched, 'items matched your request but', astgtm_items$context$returned, 'items are returned.')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n22912 items matched your request but 10 items are returned.\n```\n:::\n:::\n\n\nThis is because the return is paginated. The STAC API, by default, returns the \nfirst 10 records. To explore more items, you can add `?page=n` (in which `n` is \nthe page number (i.e. ?page=2)) to the URL link and submit another request.\nBelow, request a query to return records on the second page. \n\n\n::: {.cell}\n\n```{.r .cell-code}\npage_2_url <- paste0(items_url, '?page=2')\n\nastgtm_page2_items <- httr::GET(page_2_url) %>% \n  httr::content(as = \"text\") %>%  \n  jsonlite::fromJSON()\n\nastgtm_page2_items$features[1,] %>% \n  jsonlite::toJSON(auto_unbox = TRUE, pretty = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n```{style=\"max-height: 300px;\"}\n[\n  {\n    \"type\": \"Feature\",\n    \"id\": \"ASTGTMV003_N03E042\",\n    \"stac_version\": \"1.0.0\",\n    \"stac_extensions\": [],\n    \"collection\": \"ASTGTM.v003\",\n    \"geometry\": {\n      \"type\": \"Polygon\",\n      \"coordinates\": [\n        [\n          [41.9999, 2.9999],\n          [43.0001, 2.9999],\n          [43.0001, 4.0001],\n          [41.9999, 4.0001],\n          [41.9999, 2.9999]\n        ]\n      ]\n    },\n    \"bbox\": [41.9999, 2.9999, 43.0001, 4.0001],\n    \"links\": [\n      {\n        \"rel\": \"self\",\n        \"href\": \"https://cmr.earthdata.nasa.gov/stac/LPCLOUD/collections/ASTGTM.v003/items/ASTGTMV003_N03E042\"\n      },\n      {\n        \"rel\": \"parent\",\n        \"href\": \"https://cmr.earthdata.nasa.gov/stac/LPCLOUD/collections/ASTGTM.v003\"\n      },\n      {\n        \"rel\": \"collection\",\n        \"href\": \"https://cmr.earthdata.nasa.gov/stac/LPCLOUD/collections/ASTGTM.v003\"\n      },\n      {\n        \"rel\": \"root\",\n        \"href\": \"https://cmr.earthdata.nasa.gov/stac/\"\n      },\n      {\n        \"rel\": \"provider\",\n        \"href\": \"https://cmr.earthdata.nasa.gov/stac/LPCLOUD\"\n      },\n      {\n        \"rel\": \"via\",\n        \"href\": \"https://cmr.earthdata.nasa.gov/search/concepts/G1726373735-LPCLOUD.json\"\n      },\n      {\n        \"rel\": \"via\",\n        \"href\": \"https://cmr.earthdata.nasa.gov/search/concepts/G1726373735-LPCLOUD.umm_json\"\n      }\n    ],\n    \"properties\": {\n      \"datetime\": \"2000-03-01T00:00:00.000Z\",\n      \"start_datetime\": \"2000-03-01T00:00:00.000Z\",\n      \"end_datetime\": \"2013-11-30T23:59:59.000Z\"\n    },\n    \"assets\": {\n      \"003/ASTGTMV003_N03E042_dem\": {\n        \"href\": \"https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ASTGTM.003/ASTGTMV003_N03E042_dem.tif\",\n        \"title\": \"Download ASTGTMV003_N03E042_dem.tif\"\n      },\n      \"003/ASTGTMV003_N03E042_num\": {\n        \"href\": \"https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ASTGTM.003/ASTGTMV003_N03E042_num.tif\",\n        \"title\": \"Download ASTGTMV003_N03E042_num.tif\"\n      },\n      \"browse\": {\n        \"href\": \"https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ASTGTM.003/ASTGTMV003_N03E042.1.jpg\",\n        \"type\": \"image/jpeg\",\n        \"title\": \"Download ASTGTMV003_N03E042.1.jpg\"\n      },\n      \"metadata\": {\n        \"href\": \"https://cmr.earthdata.nasa.gov/search/concepts/G1726373735-LPCLOUD.xml\",\n        \"type\": \"application/xml\"\n      },\n      \"003/ASTGTMV003_N00W061_dem\": {},\n      \"003/ASTGTMV003_N00W061_num\": {},\n      \"003/ASTGTMV003_N02W066_dem\": {},\n      \"003/ASTGTMV003_N02W066_num\": {},\n      \"003/ASTGTMV003_N02W069_dem\": {},\n      \"003/ASTGTMV003_N02W069_num\": {},\n      \"003/ASTGTMV003_N01E022_dem\": {},\n      \"003/ASTGTMV003_N01E022_num\": {},\n      \"003/ASTGTMV003_N01E026_dem\": {},\n      \"003/ASTGTMV003_N01E026_num\": {},\n      \"003/ASTGTMV003_N02W064_dem\": {},\n      \"003/ASTGTMV003_N02W064_num\": {},\n      \"003/ASTGTMV003_N01W064_dem\": {},\n      \"003/ASTGTMV003_N01W064_num\": {},\n      \"003/ASTGTMV003_N01E027_dem\": {},\n      \"003/ASTGTMV003_N01E027_num\": {},\n      \"003/ASTGTMV003_N00E006_dem\": {},\n      \"003/ASTGTMV003_N00E006_num\": {}\n    }\n  }\n] \n```\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## 2e. Assets\n\nThe STAC Item ID (CMR Granule ID) is the unique identifier assigned to each granule \nwithin a data collection. Within each STAC Item are assets, which include the \ndownloadable and streamable URL to data files along with other asset objects. Below, the first Granule \nID is used to get the downloadable data file.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nitems_df <- jsonlite::fromJSON(F1) \nitem <- items_df$assets            # Get the assets for the first Item\nassets <- purrr::map_df(items_df$assets, data.frame, .id = 'asset')\nassets\n```\n\n::: {.cell-output .cell-output-stdout}\n```{style=\"max-height: 200px;\"}\n                        asset\n1  003/ASTGTMV003_N03E008_dem\n2  003/ASTGTMV003_N03E008_num\n3                      browse\n4                    metadata\n5  003/ASTGTMV003_N02E022_dem\n6  003/ASTGTMV003_N02E022_num\n7  003/ASTGTMV003_N00W065_dem\n8  003/ASTGTMV003_N00W065_num\n9  003/ASTGTMV003_N01E009_dem\n10 003/ASTGTMV003_N01E009_num\n11 003/ASTGTMV003_N02E009_dem\n12 003/ASTGTMV003_N02E009_num\n13 003/ASTGTMV003_N03E021_dem\n14 003/ASTGTMV003_N03E021_num\n15 003/ASTGTMV003_N01E021_dem\n16 003/ASTGTMV003_N01E021_num\n17 003/ASTGTMV003_N01E042_dem\n18 003/ASTGTMV003_N01E042_num\n19 003/ASTGTMV003_N01W069_dem\n20 003/ASTGTMV003_N01W069_num\n21 003/ASTGTMV003_N01W080_dem\n22 003/ASTGTMV003_N01W080_num\n                                                                                                  href\n1  https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ASTGTM.003/ASTGTMV003_N03E008_dem.tif\n2  https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ASTGTM.003/ASTGTMV003_N03E008_num.tif\n3       https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ASTGTM.003/ASTGTMV003_N03E008.1.jpg\n4                               https://cmr.earthdata.nasa.gov/search/concepts/G1716133754-LPCLOUD.xml\n5                                                                                                 <NA>\n6                                                                                                 <NA>\n7                                                                                                 <NA>\n8                                                                                                 <NA>\n9                                                                                                 <NA>\n10                                                                                                <NA>\n11                                                                                                <NA>\n12                                                                                                <NA>\n13                                                                                                <NA>\n14                                                                                                <NA>\n15                                                                                                <NA>\n16                                                                                                <NA>\n17                                                                                                <NA>\n18                                                                                                <NA>\n19                                                                                                <NA>\n20                                                                                                <NA>\n21                                                                                                <NA>\n22                                                                                                <NA>\n                                 title            type\n1  Download ASTGTMV003_N03E008_dem.tif            <NA>\n2  Download ASTGTMV003_N03E008_num.tif            <NA>\n3    Download ASTGTMV003_N03E008.1.jpg      image/jpeg\n4                                 <NA> application/xml\n5                                 <NA>            <NA>\n6                                 <NA>            <NA>\n7                                 <NA>            <NA>\n8                                 <NA>            <NA>\n9                                 <NA>            <NA>\n10                                <NA>            <NA>\n11                                <NA>            <NA>\n12                                <NA>            <NA>\n13                                <NA>            <NA>\n14                                <NA>            <NA>\n15                                <NA>            <NA>\n16                                <NA>            <NA>\n17                                <NA>            <NA>\n18                                <NA>            <NA>\n19                                <NA>            <NA>\n20                                <NA>            <NA>\n21                                <NA>            <NA>\n22                                <NA>            <NA>\n```\n:::\n:::\n\n\nThe links found in the `href` field can be used to download each specific asset.\n\n------------------------------------------------------------------------\n\n# 3. CMR-STAC Search\n\nIn the previous section, we learned how to navigate and explore the STAC Catalog.\nIn this section, we are utilizing CMR-STAC Search endpoint to query items and \nassociated assets faster and in a more precise way. With the CMR-STAC Search endpoint, \nwe can specify the collection(s), the area of interest, the time period of interest, \nas well as other parameters to identify the STAC Items that meet our criteria. Visit [here](https://github.com/radiantearth/stac-api-spec/tree/master/item-search#query-parameters-and-fields) \nfor more information on search query parameters.\n\nUse the following code to find the link from within the LPCLOUD catalog.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlpcloud_search_URL <- lpcloud_cat$links[which(lpcloud_cat$links$rel == 'search'),'href']\nlpcloud_search_URL\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"https://cmr.earthdata.nasa.gov/stac/LPCLOUD/search\"\n[2] \"https://cmr.earthdata.nasa.gov/stac/LPCLOUD/search\"\n```\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## 3a. Define Search Parameters\n\nNext, define the search parameters.\n- Query by collection: Collection IDs should be defined as a list.\n- Spatial Querying via Bounding Box: A bounding box including the coordinates \nof LL (lower left) and UR (upper right) respectively.\n- Temporal Querying: Time period of interest should be specified as \n`YYYY-MM-DDTHH:MM:SSZ/YYYY-MM-DDTHH:MM:SSZ`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncollections <- list('ASTGTM.v003')\ndatetime <- '2000-01-01T00:00:00Z/2001-01-31T23:59:59Z'   #YYYY-MM-DDTHH:MM:SSZ/YYYY-MM-DDTHH:MM:SSZ\nbbox <- '-122.0622682571411,39.897234301806,-122.04918980598451,39.91309383703065' # LL and UR Coordinates\n```\n:::\n\n\nCreate search body object from our search parameters.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbody <- list(limit=100,\n             datetime=datetime,\n             bbox= bbox,\n             collections= collections)\n```\n:::\n\n\nNotice the `limit` parameter in the `body` object. This parameter allows us to \nadjust the number of records returned during a request (default = 10).\n\n------------------------------------------------------------------------\n\n## 3b. Search for Items\n\nNext, submit a query to STAC Search endpoint using a POST request.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsearch_req <- httr::POST(lpcloud_search_URL[1], body = body, encode = \"json\") %>% \n  httr::content(as = \"text\") %>%  \n  jsonlite::fromJSON()\n\nnames(search_req)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"type\"           \"stac_version\"   \"numberMatched\"  \"numberReturned\"\n[5] \"features\"       \"links\"          \"context\"       \n```\n:::\n:::\n\n\nLet's see how many STAC Items, or granules, intersect with our search parameters.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncat(\"The number of STAC Items matched your query is \", search_req$numberMatched, 'and ',  search_req$numberReturned, 'Items are returned.')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nThe number of STAC Items matched your query is  1 and  1 Items are returned.\n```\n:::\n:::\n\n\nNext, create a data frame with the returned information, including granule ID, \ndatetime properties, and the downloadable URL links to the assets.  \n\n\n::: {.cell}\n\n```{.r .cell-code}\ngranule_list <- list()\n\nn <- 1\nfor(row in row.names(search_req$features)){\n  f <- search_req$features[row,]\n  for (b in f$assets){\n    df <- data.frame(Collection = f$collection,\n                     Granule_ID = f$id,\n                     Datetime = f$properties$datetime,\n                     Asset_Link = b$href, stringsAsFactors=FALSE)\n    granule_list[[n]] <- df\n    n <- n + 1\n  }\n}\n\nsearch_df <- do.call(rbind, granule_list)\nDT::datatable(search_df)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"htmlwidget-6e68cdeae74be2b16765\" style=\"width:100%;height:auto;\" class=\"datatables html-widget\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-6e68cdeae74be2b16765\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\"],[\"ASTGTM.v003\",\"ASTGTM.v003\",\"ASTGTM.v003\",\"ASTGTM.v003\"],[\"ASTGTMV003_N39W123\",\"ASTGTMV003_N39W123\",\"ASTGTMV003_N39W123\",\"ASTGTMV003_N39W123\"],[\"2000-03-01T00:00:00.000Z\",\"2000-03-01T00:00:00.000Z\",\"2000-03-01T00:00:00.000Z\",\"2000-03-01T00:00:00.000Z\"],[\"https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ASTGTM.003/ASTGTMV003_N39W123_dem.tif\",\"https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/ASTGTM.003/ASTGTMV003_N39W123_num.tif\",\"https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-public/ASTGTM.003/ASTGTMV003_N39W123.1.jpg\",\"https://cmr.earthdata.nasa.gov/search/concepts/G1726750594-LPCLOUD.xml\"]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>Collection<\\/th>\\n      <th>Granule_ID<\\/th>\\n      <th>Datetime<\\/th>\\n      <th>Asset_Link<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"columnDefs\":[{\"orderable\":false,\"targets\":0}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\nThe CMR-STAC Search endpoint allows user to quickly search for STAC Items that \nmeet their specific spatial, temporal, and data product requirements. Now that \nyou learned how to navigate and explore the CMR-STAC catalog, check out the [`HLS_tutorial`](https://git.earthdata.nasa.gov/projects/LPDUR/repos/hls_tutorial_r/raw/HLS_Tutorial.html?at=refs%2Fheads%2Fmain) to learn how to interact with HLS data specifically. \n\n------------------------------------------------------------------------\n\n### Contact Information\n\n  **Material written by Mahsa Jami^1^ and Aaron Friesz^1^**  \n  Contact: [LPDAAC\\@usgs.gov](mailto:LPDAAC@usgs.gov){.email}  \n  Voice: +1-866-573-3222  \n  Organization: Land Processes Distributed Active Archive Center (LP DAAC)  \n  Website: <https://lpdaac.usgs.gov/>\\                   \n  Date last modified: 09-13-2021                \n  \n  ^1^ KBR, Inc., contractor to the U.S. Geological Survey, Earth Resources Observation and Science (EROS) Center, \n  Sioux Falls, South Dakota, USA. Work performed under USGS contract G0121D0001 for LP DAAC^2^.\n  \n  ^2^ LP DAAC Work performed under NASA contract NNG14HH33I.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../site_libs/htmlwidgets-1.5.4/htmlwidgets.js\"></script>\n<link href=\"../site_libs/datatables-css-0.0.0/datatables-crosstalk.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/datatables-binding-0.25/datatables.js\"></script>\n<script src=\"../site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\n<link href=\"../site_libs/dt-core-1.11.3/css/jquery.dataTables.min.css\" rel=\"stylesheet\" />\n<link href=\"../site_libs/dt-core-1.11.3/css/jquery.dataTables.extra.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/dt-core-1.11.3/js/jquery.dataTables.min.js\"></script>\n<link href=\"../site_libs/crosstalk-1.2.0/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/crosstalk-1.2.0/js/crosstalk.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}