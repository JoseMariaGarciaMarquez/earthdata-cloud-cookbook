---
title: "earthdata-python-r-handoff"
---

## Hi Luis, this is the dream:

create once, use often, passing python objects to R through Quarto:

## Python: `earthdata` package for auth & data access 

*From <https://nasa-openscapes.github.io/earthdata-cloud-cookbook/examples/earthdata-access-demo.html>*

```{python}
from earthdata import Auth, DataGranules, Store

# first we authenticate with NASA EDL
auth = Auth().login(strategy="netrc")

# Then we build a Query with spatiotemporal parameters
GranuleQuery = DataGranules().concept_id("C1575731655-LPDAAC_ECS").bounding_box(-134.7,58.9,-133.9,59.2)

# We get the metadata records from CMR
granules = GranuleQuery.get()

# Now it{s time to download (or open) our data granules list with get()
files = Store(auth).get(granules, local_path='./data')

```

## R code for analysis

And now R, if this is my preferred language

```{r}
head(py$files)
# now my R analysis
```

## Notes, May 20 2022

I tried this in our staging 2i2c instance, sort of simulataneously in the RStudio IDE (which needed python to be installed) and also in JupyterLab (which also wasn't happy). But we have the vision, this is going to be great.

Working in RStudio IDE in 2i2c.

When first tried to run Python section below, asked to install `reticulate`

```{.r}
install.packages("reticulate") # < should quarto need this? 

reticulate::repl_python()
No non-system installation of Python could be found.
Would you like to download and install Miniconda?
Miniconda is an open source environment management system for Python.
See https://docs.conda.io/en/latest/miniconda.html for more details.

Would you like to install Miniconda? [Y/n]: from earthdata import Auth, DataGranules, Store
Please answer yes or no: y
* Installing Miniconda -- please wait a moment ...
* Downloading 'https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh' ...
trying URL 'https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh'
Content type 'application/x-sh' length 76607678 bytes (73.1 MB)
==================================================
downloaded 73.1 MB
```

